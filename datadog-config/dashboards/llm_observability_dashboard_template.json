{
    "_note": "Template Dashboard configuration â€“ can be imported into Datadog",
    "title": "LLM Incident Commander - Observability",
    "description": "Comprehensive observability dashboard for LLM application powered by Vertex AI (Gemini). Tracks latency, tokens, cost, quality, and errors.",
    "widgets": [
        {
            "id": 1,
            "definition": {
                "title": "ðŸ“Š LLM Request Rate",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "sum:llm.requests.total{service:llm-incident-commander}.as_rate()",
                        "display_type": "bars",
                        "style": {
                            "palette": "dog_classic"
                        }
                    }
                ]
            }
        },
        {
            "id": 2,
            "definition": {
                "title": "âš¡ Latency (P50 / P95 / P99)",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "avg:llm.latency.ms{service:llm-incident-commander}",
                        "display_type": "line",
                        "style": {
                            "palette": "cool"
                        }
                    },
                    {
                        "q": "p95:llm.latency.ms{service:llm-incident-commander}",
                        "display_type": "line"
                    },
                    {
                        "q": "p99:llm.latency.ms{service:llm-incident-commander}",
                        "display_type": "line"
                    }
                ],
                "yaxis": {
                    "label": "milliseconds"
                }
            }
        },
        {
            "id": 3,
            "definition": {
                "title": "ðŸŽ¯ Token Usage",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "sum:llm.tokens.input{service:llm-incident-commander}.as_count()",
                        "display_type": "area",
                        "style": {
                            "palette": "purple"
                        }
                    },
                    {
                        "q": "sum:llm.tokens.output{service:llm-incident-commander}.as_count()",
                        "display_type": "area",
                        "style": {
                            "palette": "orange"
                        }
                    }
                ]
            }
        },
        {
            "id": 4,
            "definition": {
                "title": "ðŸ’° Estimated Cost (USD)",
                "type": "query_value",
                "requests": [
                    {
                        "q": "sum:llm.cost.usd{service:llm-incident-commander}.as_count()",
                        "aggregator": "sum"
                    }
                ],
                "precision": 6,
                "text_align": "center"
            }
        },
        {
            "id": 5,
            "definition": {
                "title": "ðŸ§  Hallucination Score (Quality)",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "avg:llm.hallucination.score{service:llm-incident-commander}",
                        "display_type": "line",
                        "style": {
                            "palette": "warm"
                        }
                    }
                ],
                "markers": [
                    {
                        "value": "y = 0.7",
                        "display_type": "error dashed",
                        "label": "Quality Threshold"
                    }
                ]
            }
        },
        {
            "id": 6,
            "definition": {
                "title": "âŒ Error Rate",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "sum:llm.errors.total{service:llm-incident-commander}.as_rate() / sum:llm.requests.total{service:llm-incident-commander}.as_rate() * 100",
                        "display_type": "line",
                        "style": {
                            "palette": "red"
                        }
                    }
                ],
                "yaxis": {
                    "label": "error %"
                }
            }
        },
        {
            "id": 600,
            "definition": {
                "title": "ðŸ’° Cost Tracking & Economics",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "sum:llm.cost.usd{model:gemini-2.0-flash}.as_count()",
                        "display_type": "line",
                        "style": {
                            "palette": "dog_classic",
                            "line_type": "solid",
                            "line_width": "normal"
                        },
                        "metadata": {
                            "alias_name": "Total Cost (USD)"
                        }
                    },
                    {
                        "q": "avg:llm.cost.per_token{model:gemini-2.0-flash}",
                        "display_type": "line",
                        "style": {
                            "palette": "cool",
                            "line_type": "dashed",
                            "line_width": "thin"
                        },
                        "metadata": {
                            "alias_name": "Cost per Token"
                        }
                    },
                    {
                        "q": "sum:llm.tokens.total{*}.as_count()",
                        "display_type": "bars",
                        "style": {
                            "palette": "warm",
                            "line_type": "solid",
                            "line_width": "normal"
                        },
                        "metadata": {
                            "alias_name": "Total Tokens Used"
                        }
                    }
                ],
                "yaxis": {
                    "min": 0
                },
                "markers": [
                    {
                        "value": "avg(llm.cost.per_token) * 1.5",
                        "label": "Anomaly Threshold",
                        "type": "error warning"
                    }
                ]
            },
            "layout": {
                "x": 0,
                "y": 12,
                "width": 12,
                "height": 4
            }
        },
        {
            "id": 7,
            "definition": {
                "title": "ðŸ”¥ High Hallucination Count",
                "type": "query_value",
                "requests": [
                    {
                        "q": "sum:llm.hallucination.high_score{service:llm-incident-commander}.as_count()",
                        "aggregator": "sum"
                    }
                ],
                "precision": 0
            }
        },
        {
            "id": 8,
            "definition": {
                "title": "ðŸ“ˆ SLO Status - Availability",
                "type": "slo",
                "slo_id": "availability_slo",
                "time_windows": [
                    "30d"
                ],
                "show_error_budget": true
            }
        },
        {
            "id": 9,
            "definition": {
                "title": "ðŸ“ˆ SLO Status - Latency",
                "type": "slo",
                "slo_id": "latency_slo",
                "time_windows": [
                    "7d"
                ],
                "show_error_budget": true
            }
        },
        {
            "id": 10,
            "definition": {
                "title": "ðŸ“ˆ SLO Status - Error Rate",
                "type": "slo",
                "slo_id": "error_rate_slo",
                "time_windows": [
                    "7d"
                ],
                "show_error_budget": true
            }
        },
        {
            "id": 11,
            "definition": {
                "title": "ðŸš¨ Active Incidents",
                "type": "alert_graph",
                "alert_id": "high_latency_monitor",
                "viz_type": "timeseries"
            }
        },
        {
            "id": 12,
            "definition": {
                "title": "ðŸ“‹ Recent Logs",
                "type": "log_stream",
                "query": "service:llm-incident-commander",
                "columns": [
                    "timestamp",
                    "level",
                    "message"
                ],
                "show_date_column": true
            }
        },
        {
            "id": 13,
            "definition": {
                "title": "ðŸ” APM Service Overview",
                "type": "servicemap",
                "service": "llm-incident-commander",
                "filters": [
                    "env:production"
                ]
            }
        },
        {
            "id": 14,
            "definition": {
                "title": "ðŸš¦ LLM Health Status",
                "type": "query_value",
                "requests": [
                    {
                        "q": "(sum:llm.requests.total{service:llm-incident-commander,status:success}.as_count() / sum:llm.requests.total{service:llm-incident-commander}.as_count()) * 100",
                        "aggregator": "avg",
                        "conditional_formats": [
                            {
                                "comparator": ">=",
                                "value": 99,
                                "palette": "white_on_green"
                            },
                            {
                                "comparator": ">=",
                                "value": 95,
                                "palette": "white_on_yellow"
                            },
                            {
                                "comparator": "<",
                                "value": 95,
                                "palette": "white_on_red"
                            }
                        ]
                    }
                ],
                "precision": 1,
                "text_align": "center",
                "custom_unit": "%",
                "title_size": "16",
                "title_align": "center"
            }
        },
        {
            "id": 15,
            "definition": {
                "title": "ðŸ’µ Cost Per Request (Avg)",
                "type": "query_value",
                "requests": [
                    {
                        "q": "avg:llm.cost.usd{service:llm-incident-commander}",
                        "aggregator": "avg",
                        "conditional_formats": [
                            {
                                "comparator": "<=",
                                "value": 0.001,
                                "palette": "white_on_green"
                            },
                            {
                                "comparator": "<=",
                                "value": 0.005,
                                "palette": "white_on_yellow"
                            },
                            {
                                "comparator": ">",
                                "value": 0.005,
                                "palette": "white_on_red"
                            }
                        ]
                    }
                ],
                "precision": 6,
                "custom_unit": "$"
            }
        },
        {
            "id": 16,
            "definition": {
                "title": "ðŸ“ˆ Token Efficiency (Output/Input)",
                "type": "timeseries",
                "requests": [
                    {
                        "q": "avg:llm.token_efficiency{service:llm-incident-commander}",
                        "display_type": "line",
                        "style": {
                            "palette": "green"
                        }
                    }
                ],
                "markers": [
                    {
                        "value": "y = 1",
                        "display_type": "info dashed",
                        "label": "Balanced I/O"
                    }
                ]
            }
        },
        {
            "id": 17,
            "definition": {
                "title": "ðŸ”” Monitor Status Overview",
                "type": "manage_status",
                "display_format": "countsAndList",
                "color_preference": "text",
                "hide_zero_counts": false,
                "query": "service:llm-incident-commander",
                "sort": "status,asc",
                "count": 10,
                "start": 0,
                "summary_type": "monitors"
            }
        },
        {
            "id": 18,
            "definition": {
                "title": "ðŸš« Blocked Responses",
                "type": "query_value",
                "requests": [
                    {
                        "q": "sum:llm.safety.blocked{service:llm-incident-commander}.as_count()",
                        "aggregator": "sum",
                        "conditional_formats": [
                            {
                                "comparator": "==",
                                "value": 0,
                                "palette": "white_on_green"
                            },
                            {
                                "comparator": ">",
                                "value": 0,
                                "palette": "white_on_yellow"
                            },
                            {
                                "comparator": ">",
                                "value": 5,
                                "palette": "white_on_red"
                            }
                        ]
                    }
                ],
                "precision": 0,
                "custom_unit": "blocked"
            }
        }
    ],
    "template_variables": [
        {
            "name": "env",
            "default": "production",
            "prefix": "env"
        },
        {
            "name": "service",
            "default": "llm-incident-commander",
            "prefix": "service"
        }
    ],
    "layout_type": "ordered",
    "notify_list": [],
    "reflow_type": "fixed"
}